<!doctype html>
<meta charset="utf-8" />
<title>XDrop – P2P</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:24px auto;padding:0 16px}
  fieldset{margin:12px 0;padding:12px;border-radius:12px}
  input[type=text]{width:200px;padding:8px;font-size:18px;letter-spacing:2px;text-align:center}
  button{padding:10px 14px;border-radius:8px;border:1px solid #999;background:#fff;cursor:pointer;margin-right:6px}
  progress{width:100%}
  #log{white-space:pre-wrap;background:#fafafa;border:1px solid #eee;border-radius:8px;padding:10px;height:180px;overflow:auto}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .code{font-size:24px;font-weight:700;letter-spacing:3px}
</style>

<h1>XDrop – WebRTC (numeric token)</h1>

<fieldset>
  <legend>Connect</legend>
  <div class="row">
    <button id="btnCreate">Create (Sender)</button>
    <span>or enter code:</span>
    <input id="token" type="text" maxlength="6" inputmode="numeric" pattern="[0-9]*" placeholder="______" />
    <button id="btnReset">Reset</button>
  </div>
  <div class="row" style="margin-top:8px">
    <span>Your Code: <span id="myCode" class="code">———</span></span>
    <div id="qrBox" style="margin-left:auto"></div>
  </div>
  <div id="status"></div>
</fieldset>

<fieldset>
  <legend>Send / Receive</legend>
  <input id="file" type="file">
  <button id="btnSend" disabled>Send File</button>
  <progress id="progSend" value="0" max="1" hidden></progress>
</fieldset>

<fieldset>
  <legend>Received</legend>
  <div>File: <b id="recvName">—</b></div>
  <progress id="progRecv" value="0" max="1" hidden></progress><br/>
  <a id="download" href="#" download style="display:none">Download</a>
</fieldset>

<h3>Log</h3>
<div id="log"></div>

<script src="./app.js" defer></script>
